(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-03d2fe78"],{"09f4":function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),Math.easeInOutQuad=function(e,t,a,n){return e/=n/2,e<1?a/2*e*e+t:(e--,-a/2*(e*(e-2)-1)+t)};var n=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function r(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function l(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function i(e,t,a){var i=l(),s=e-i,o=20,c=0;t="undefined"===typeof t?500:t;var u=function e(){c+=o;var l=Math.easeInOutQuad(c,i,s,t);r(l),c<t?n(e):a&&"function"===typeof a&&a()};u()}},"453c":function(e,t,a){},"59be":function(e,t,a){"use strict";var n=a("453c"),r=a.n(n);r.a},"5f9b":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-card",{staticClass:"box-card filter-container"},[a("el-form",{ref:"listQuery",attrs:{model:e.listQuery}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"用户名"}},[a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"输入用户名",clearable:""},model:{value:e.listQuery.username,callback:function(t){e.$set(e.listQuery,"username",t)},expression:"listQuery.username"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"订单编号"}},[a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"输入订单编号",clearable:""},model:{value:e.listQuery.no,callback:function(t){e.$set(e.listQuery,"no",t)},expression:"listQuery.no"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"支付交易号"}},[a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"输入支付交易号",clearable:""},model:{value:e.listQuery.payment_no,callback:function(t){e.$set(e.listQuery,"payment_no",t)},expression:"listQuery.payment_no"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"收货人"}},[a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"输入收货人",clearable:""},model:{value:e.listQuery.contact_name,callback:function(t){e.$set(e.listQuery,"contact_name",t)},expression:"listQuery.contact_name"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"联系电话"}},[a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"输入收货人联系电话",clearable:""},model:{value:e.listQuery.contact_phone,callback:function(t){e.$set(e.listQuery,"contact_phone",t)},expression:"listQuery.contact_phone"}})],1)],1),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"订单创建时间"}},[a("el-date-picker",{attrs:{type:"datetimerange","picker-options":e.pickerOptions,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right"},model:{value:e.listQuery.created_at,callback:function(t){e.$set(e.listQuery,"created_at",t)},expression:"listQuery.created_at"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6,offset:20}},[a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",staticStyle:{"margin-left":"20px"},attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleFilter}},[e._v(" "+e._s(e.$t("table.search"))+" ")])],1)],1)],1)],1),a("el-card",{staticClass:"box-card box-cart-centent",staticStyle:{"margin-top":"20px"}},[a("el-row",[a("el-col",{attrs:{span:6,offset:20}},[a("el-button",{staticStyle:{margin:"0 0 20px 20px"},attrs:{loading:e.downloadLoading,type:"primary",icon:"el-icon-document"},on:{click:e.handleDownload}},[e._v(" 导出订单 ")])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],key:e.tableKey,staticStyle:{width:"100%"},attrs:{data:e.list,border:"",fit:"","highlight-current-row":"","header-cell-style":{background:"#ebeef5"}}},[a("el-table-column",{attrs:{"header-align":"center",type:"index",align:"center",label:"ID",width:"60"}}),a("el-table-column",{attrs:{"header-align":"center",align:"center",label:"订单号",width:"180px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{attrs:{to:{name:"ViewOrUpdate",params:{no:t.row.no,username:t.row.user.username}}}},[a("el-tag",[e._v(e._s(t.row.no))])],1)]}}])}),a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"total_amount",label:"总金额"}}),a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"user.username",label:"用户",width:"100px"}}),a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"status",formatter:e.formatOrderStatus,label:"订单状态",width:"130px"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[n.editStatus?[a("el-select",{attrs:{placeholder:"请选择活动区域"},model:{value:n.status,callback:function(t){e.$set(n,"status",t)},expression:"row.status"}},e._l(e.orderStatusList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.title,value:e.id}})})),1)]:a("span",[e._v(e._s(e._f("filterOrderStatus")(n.status)))])]}}])}),e._v("> "),a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"payment_no",label:"支付交易号"}}),a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"payment_method",formatter:e.formatPaymentMethod,label:"支付方式"}}),a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"refund_status",formatter:e.formatRefundStatus,label:"退款状态",width:"110px"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[n.editStatus?[a("el-select",{attrs:{placeholder:"请选择活动区域"},model:{value:n.refund_status,callback:function(t){e.$set(n,"refund_status",t)},expression:"row.refund_status"}},e._l(e.orderRefundStatus,(function(e){return a("el-option",{key:e.id,attrs:{label:e.title,value:e.id}})})),1)]:a("span",[e._v(e._s(e._f("filterOrderStatus")(n.refund_status)))])]}}])}),a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"refund_no",label:"退款单号"}}),a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"reviewed",formatter:e.formatterReviewed,label:"是否评价"}}),a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"ship_status",formatter:e.formatShipStatus,label:"物流状态",width:"110px"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[n.editStatus?[a("el-select",{attrs:{placeholder:"请选择活动区域"},model:{value:n.ship_status,callback:function(t){e.$set(n,"ship_status",t)},expression:"row.ship_status"}},e._l(e.orderShipStatus,(function(e){return a("el-option",{key:e.id,attrs:{label:e.title,value:e.id}})})),1)]:a("span",[e._v(e._s(e._f("filterShipStatus")(n.ship_status)))])]}}])}),e._v("> "),a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"address.contact_name",label:"收货人"}}),a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"address.contact_phone",label:"联系电话",width:"110px"}}),a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"address",label:"收货地址",width:"150px"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(e._f("filterAddress")(a.address))+" ")]}}])}),e._v("> "),a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"paid_at",label:"支付时间",width:"100px"}}),a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"created_at",label:"订单创建时间",width:"100px"}}),a("el-table-column",{attrs:{align:"center",fixed:"right",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[n.editStatus?a("el-button",{attrs:{type:"success",circle:"",icon:"el-icon-check"},on:{click:function(t){return e.confirmEdit(n)}}}):e._e(),n.editStatus?a("el-button",{staticClass:"cancel-btn",staticStyle:{margin:"5px 0 0 0"},attrs:{type:"info",circle:"",icon:"el-icon-circle-close"},on:{click:function(t){return e.cancelEdit(n)}}}):a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:""},on:{click:function(e){n.editStatus=!n.editStatus}}})]}}])})],1)],1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.listQuery.page,limit:e.listQuery.page_limit},on:{"update:page":function(t){return e.$set(e.listQuery,"page",t)},"update:limit":function(t){return e.$set(e.listQuery,"page_limit",t)},pagination:e.getList}})],1)},r=[],l=(a("d81d"),a("d3b7"),a("b0d9")),i=a("333d"),s=a("6724"),o={name:"PurchaseOrderList",components:{Pagination:i["a"]},directives:{waves:s["a"]},filters:{filterOrderStatus:function(e){switch(e){case 0:return"待付款";case 1:return"已付款";case-1:return"付款失败"}},filterShipStatus:function(e){switch(e){case 0:return"已签收";case 1:return"已发货";case-1:return"未发货"}},filterAddress:function(e){return e?e.province+e.city+e.district+e.address:""}},data:function(){return{list:[{status:"",ship_status:"",refund_status:"",created_at:"",user:{username:""},address:{province:""}}],total:0,tableKey:0,listQuery:{page:1,page_limit:10,no:"",payment_no:"",username:"",contact_name:"",contact_phone:"",created_at:""},pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]},listLoading:!0,orderStatusList:[{id:1,title:"已付款"},{id:0,title:"待付款"},{id:-1,title:"付款失败"},{id:-2,title:"取消订单"}],orderShipStatus:[{id:1,title:"已发货"},{id:-1,title:"未发货"},{id:0,title:"已签收"}],orderRefundStatus:[{id:1,title:"未退款"},{id:-1,title:"已退款"}],downloadLoading:!1}},created:function(){this.getList()},methods:{getList:function(){var e=this;this.listLoading=!0,Object(l["a"])(this.listQuery).then((function(t){e.list=t.data.data,e.total=t.data.total,e.listLoading=!1;var a=e.list;e.list=a.map((function(t){return e.$set(t,"editStatus",!1),t}))}))},formatPaymentMethod:function(e,t){return"null"===e.payment_method?"":e.payment_method},formatOrderStatus:function(e){switch(e.status){case 0:return"待付款";case 1:return"已付款";case-1:return"付款失败"}},formatShipStatus:function(e){switch(e.ship_status){case 0:return"已签收";case 1:return"已发货";case-1:return"未发货"}},formatRefundStatus:function(e){switch(e.refund_status){case 1:return"未退款";case-1:return"已退款"}},formatterReviewed:function(e){return e.reviewed?"已评价":"未评价"},handleFilter:function(){this.getList()},confirmEdit:function(e){var t=this;Object(l["c"])(e).then((function(e){20001===e.code?(t.$message({message:"更新成功",type:"success"}),t.getList()):t.$message({message:"更新失败",type:"fail"})})),e.editStatus=!1},cancelEdit:function(e){e.editStatus=!1,this.$message({message:"取消编辑",type:"warning"}),this.getList()},handleDownload:function(){var e=this;this.downloadLoading=!0,Promise.all([a.e("chunk-489b8c18"),a.e("chunk-2133cd4f")]).then(a.bind(null,"4bf8")).then((function(t){var a=["订单号","总金额","支付交易号","支付方式","退款单号","是否退款","订单创建时间"],n=["no","total_amount","payment_no","payment_method","refund_no","reviewed","created_at"],r=e.list,l=e.formatJson(n,r);t.export_json_to_excel({header:a,data:l,filename:e.filename,autoWidth:!0,bookType:"xlsx"}),e.downloadLoading=!1}))}}},c=o,u=(a("59be"),a("2877")),d=Object(u["a"])(c,n,r,!1,null,"4364eb8e",null);t["default"]=d.exports},6724:function(e,t,a){"use strict";a("8d41");var n="@@wavesContext";function r(e,t){function a(a){var n=Object.assign({},t.value),r=Object.assign({ele:e,type:"hit",color:"rgba(0, 0, 0, 0.15)"},n),l=r.ele;if(l){l.style.position="relative",l.style.overflow="hidden";var i=l.getBoundingClientRect(),s=l.querySelector(".waves-ripple");switch(s?s.className="waves-ripple":(s=document.createElement("span"),s.className="waves-ripple",s.style.height=s.style.width=Math.max(i.width,i.height)+"px",l.appendChild(s)),r.type){case"center":s.style.top=i.height/2-s.offsetHeight/2+"px",s.style.left=i.width/2-s.offsetWidth/2+"px";break;default:s.style.top=(a.pageY-i.top-s.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",s.style.left=(a.pageX-i.left-s.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return s.style.backgroundColor=r.color,s.className="waves-ripple z-active",!1}}return e[n]?e[n].removeHandle=a:e[n]={removeHandle:a},a}var l={bind:function(e,t){e.addEventListener("click",r(e,t),!1)},update:function(e,t){e.removeEventListener("click",e[n].removeHandle,!1),e.addEventListener("click",r(e,t),!1)},unbind:function(e){e.removeEventListener("click",e[n].removeHandle,!1),e[n]=null,delete e[n]}},i=function(e){e.directive("waves",l)};window.Vue&&(window.waves=l,Vue.use(i)),l.install=i;t["a"]=l},"8d41":function(e,t,a){},b0d9:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"c",(function(){return l})),a.d(t,"b",(function(){return i}));var n=a("b775");function r(e){return Object(n["a"])({url:"admin/order",method:"get",params:e})}function l(e){return Object(n["a"])({url:"admin/order/"+e.id,method:"post",data:e})}function i(e){return Object(n["a"])({url:"admin/order/"+e,method:"get"})}}}]);