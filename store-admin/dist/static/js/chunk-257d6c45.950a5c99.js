(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-257d6c45"],{"352d":function(t,e,n){"use strict";var i=n("5938"),o=n.n(i);o.a},5938:function(t,e,n){},"9b5c":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("el-card",[n("el-form",{ref:"form",attrs:{model:t.form,inline:!0,"label-position":"right"}},[n("el-row",[n("el-col",[n("el-form-item",{attrs:{label:"所属The House"}},[t.formDisable?n("el-input",{staticStyle:{width:"400px"},attrs:{readonly:t.formDisable},model:{value:t.form.the_house.title,callback:function(e){t.$set(t.form.the_house,"title",e)},expression:"form.the_house.title"}}):n("el-select",{staticStyle:{width:"190px"},attrs:{placeholder:"请选择"},model:{value:t.form.the_house_id,callback:function(e){t.$set(t.form,"the_house_id",e)},expression:"form.the_house_id"}},t._l(t.theHouseList,(function(t){return n("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})})),1)],1)],1)],1),n("el-row",[n("el-col",{attrs:{span:10}},[n("div",{staticStyle:{width:"470px","margin-bottom":"25px"}},[t.formDisable?t._e():n("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",plain:"",icon:"el-icon-edit-outline"},on:{click:function(e){return t.handleDescribes("title")}}}),n("el-collapse",{model:{value:t.activeNames,callback:function(e){t.activeNames=e},expression:"activeNames"}},[n("el-collapse-item",{attrs:{name:"title"}},[n("template",{slot:"title"},[n("span",{staticClass:"theHouseText"},[t._v("文案标题")])]),n("span",{domProps:{innerHTML:t._s(t.form.title)}})],2)],1)],1)]),n("el-col",{attrs:{span:10}},[n("div",{staticStyle:{width:"470px","margin-bottom":"25px"}},[t.formDisable?t._e():n("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",plain:"",icon:"el-icon-edit-outline"},on:{click:function(e){return t.handleDescribes("content")}}}),n("el-collapse",{model:{value:t.activeNames,callback:function(e){t.activeNames=e},expression:"activeNames"}},[n("el-collapse-item",{attrs:{name:"content"}},[n("template",{slot:"title"},[n("span",{staticClass:"theHouseText"},[t._v("文案正文")])]),n("span",{domProps:{innerHTML:t._s(t.form.content)}})],2)],1)],1)])],1),n("el-row",[n("el-col",{attrs:{span:10}},[n("div",{staticStyle:{width:"470px","margin-bottom":"25px"}},[t.formDisable?t._e():n("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",plain:"",icon:"el-icon-edit-outline"},on:{click:function(e){return t.handleDescribes("img_desc")}}}),n("el-collapse",{model:{value:t.activeNames,callback:function(e){t.activeNames=e},expression:"activeNames"}},[n("el-collapse-item",{attrs:{name:"img_desc"}},[n("template",{slot:"title"},[n("span",{staticClass:"theHouseText"},[t._v("图片描述")])]),n("span",{domProps:{innerHTML:t._s(t.form.img_desc)}})],2)],1)],1)]),n("el-col",{attrs:{span:10}},[n("el-form-item",{attrs:{label:"文案图片"}},[t.formDisable?n("el-image",{staticStyle:{width:"120px",height:"120px"},attrs:{src:t.form.img,fit:"scale-down"},on:{click:function(e){return t.previewImgAction(t.form.img)}}}):n("el-upload",{ref:"uploadBanner",class:{hideBanner:t.hideUploadBanner},attrs:{name:"banner",action:"#","list-type":"picture-card","auto-upload":!1,limit:t.limitCountBanner,"file-list":t.bannerList,"on-change":t.handleBannerChange,"on-remove":t.handleBannerRemove}},[n("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),n("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传一张jpg/png文件，且不超过500kb")])],1)],1)],1)],1)],1)],1),t.formDisable?t._e():n("el-card",{staticClass:"box-card-image",attrs:{shadow:"hover"}},[n("el-row",{staticStyle:{"margin-bottom":"50px"}},[n("el-col",{attrs:{span:2,offset:8}},[n("el-button",{attrs:{type:"success"},on:{click:function(e){return t.submitTheHouse()}}},[t._v("提交")])],1),n("el-col",{attrs:{span:2}},[n("el-button",{attrs:{type:"info",plain:""},on:{click:t.closePageButton}},[t._v("返回")])],1)],1)],1),n("el-dialog",{attrs:{title:"图片预览",visible:t.previewImgDialogVisible,width:"50%"},on:{"update:visible":function(e){t.previewImgDialogVisible=e}}},[n("el-image",{staticStyle:{width:"100%"},attrs:{src:t.previewImg}})],1),n("el-dialog",{attrs:{title:"富文本编辑",visible:t.showDialog,width:"50%","before-close":t.handleClose},on:{"update:visible":function(e){t.showDialog=e}}},[n("tinymce",{attrs:{height:150},model:{value:t.tinyTxt,callback:function(e){t.tinyTxt=e},expression:"tinyTxt"}}),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.showDialog=!1}}},[t._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:t.confirmSaveTiny}},[t._v("确 定")])],1)],1)],1)},o=[],s=n("8256"),a=n("a718"),r={name:"ContentView",components:{Tinymce:s["a"]},data:function(){return{status:"",form:{id:"",title:"",content:"",img:"",img_desc:"",the_house_id:""},theHouseList:[],content_id:"",showDialog:!1,tinyTxt:"",flag:"",formDisable:!1,activeNames:["title","content","img_desc"],hideUploadBanner:!1,limitCountBanner:1,bannerList:[],previewImg:"",previewImgDialogVisible:!1}},created:function(){this.getHouseList(),this.getInitData()},methods:{getInitData:function(){this.status=this.$route.params.status,"view"===this.status?(this.content_id=this.$route.params.content_id,this.formDisable=!0,this.getContentDetail()):"edit"===this.status?(this.content_id=this.$route.params.content_id,this.getContentDetail(),this.hideUploadBanner=!0):"create"===this.status&&(this.form.the_house_id=this.$route.params.the_house_id)},getHouseList:function(){var t=this;Object(a["d"])().then((function(e){t.theHouseList=e.data.data}))},getContentDetail:function(){var t=this;Object(a["b"])(this.content_id).then((function(e){t.form=e.data,t.bannerList.push({url:t.form.img})}))},handleDescribes:function(t){this.flag=t,this.tinyTxt="",this.showDialog=!0},confirmSaveTiny:function(){switch(this.flag){case"title":this.form.title=this.tinyTxt,this.showDialog=!1,this.tinyTxt="";break;case"content":this.form.content=this.tinyTxt,this.showDialog=!1,this.tinyTxt="";break;case"img_desc":this.form.img_desc=this.tinyTxt,this.showDialog=!1,this.tinyTxt="";break}this.$message({message:"编辑完成",type:"success"})},handleClose:function(t){this.$confirm("确认关闭？").then((function(e){t()})).catch((function(t){}))},handleBannerChange:function(t,e){this.hideUploadBanner=e.length>=this.limitCountBanner,this.form.img=t.raw},handleBannerRemove:function(t,e){this.hideUploadBanner=e.length>=this.limitCountBanner,this.form.img=null},previewImgAction:function(t){this.previewImg=t,this.previewImgDialogVisible=!0},closePageButton:function(){this.$store.dispatch("tagsView/delView",this.$route),this.$router.go(-1)},submitTheHouse:function(){"create"===this.status?this.contentStore():"edit"===this.status&&this.contentUpdate()},contentStore:function(){var t=this,e=new FormData;for(var n in this.form)e.append(n,this.form[n]);Object(a["c"])(e).then((function(e){20001===e.code?(t.initFormData(),t.$message({type:"success",message:"创建成功！"})):t.$message({type:"error",message:"创建失败，请检查参数！"})}))},contentUpdate:function(){var t=this,e=new FormData;for(var n in this.form)e.append(n,this.form[n]);Object(a["e"])(this.form.id,e).then((function(e){console.log(e),20001===e.code?t.$message({type:"success",message:"更新成功！"}):t.$message({type:"error",message:"更新失败，请检查参数！"})}))},initFormData:function(){this.$refs["form"].resetFields(),this.bannerList=[],this.hideUploadBanner=!1}}},l=r,c=(n("352d"),n("2877")),u=Object(c["a"])(l,i,o,!1,null,null,null);e["default"]=u.exports},a718:function(t,e,n){"use strict";n.d(e,"n",(function(){return o})),n.d(e,"m",(function(){return s})),n.d(e,"o",(function(){return a})),n.d(e,"p",(function(){return r})),n.d(e,"l",(function(){return l})),n.d(e,"h",(function(){return c})),n.d(e,"g",(function(){return u})),n.d(e,"i",(function(){return h})),n.d(e,"j",(function(){return m})),n.d(e,"f",(function(){return d})),n.d(e,"k",(function(){return f})),n.d(e,"b",(function(){return p})),n.d(e,"c",(function(){return g})),n.d(e,"e",(function(){return b})),n.d(e,"a",(function(){return _})),n.d(e,"d",(function(){return v}));var i=n("b775");function o(t){return Object(i["a"])({url:"admin/the_houses",method:"get",params:t})}function s(t){return Object(i["a"])({url:"/admin/the_house/"+t,method:"get"})}function a(t){return Object(i["a"])({url:"/admin/the_house",method:"post",data:t})}function r(t,e){return Object(i["a"])({url:"/admin/the_house/"+t,method:"post",data:e})}function l(t){return Object(i["a"])({url:"/admin/the_house/"+t,method:"delete"})}function c(t){return Object(i["a"])({url:"/admin/the_house/category/list",method:"get",params:t})}function u(t){return Object(i["a"])({url:"/admin/the_house/category/"+t,method:"get"})}function h(t){return Object(i["a"])({url:"/admin/the_house/category",method:"post",data:t})}function m(t,e){return Object(i["a"])({url:"/admin/the_house/category/"+t,method:"post",data:e})}function d(t){return Object(i["a"])({url:"/admin/the_house/category/"+t,method:"delete"})}function f(t){return Object(i["a"])({url:"/admin/the_house_content/list",method:"get",params:t})}function p(t){return Object(i["a"])({url:"/admin/the_house_content/"+t,method:"get"})}function g(t){return Object(i["a"])({url:"/admin/the_house_content",method:"post",data:t})}function b(t,e){return Object(i["a"])({url:"/admin/the_house_content/"+t,method:"post",data:e})}function _(t){return Object(i["a"])({url:"/admin/the_house_content/"+t,method:"delete"})}function v(){return Object(i["a"])({url:"/admin/the_houses",method:"get"})}}}]);