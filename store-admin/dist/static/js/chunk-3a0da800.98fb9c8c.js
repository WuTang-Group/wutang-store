(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3a0da800"],{"09f4":function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),Math.easeInOutQuad=function(t,e,a,n){return t/=n/2,t<1?a/2*t*t+e:(t--,-a/2*(t*(t-2)-1)+e)};var n=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}();function r(t){document.documentElement.scrollTop=t,document.body.parentNode.scrollTop=t,document.body.scrollTop=t}function l(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function i(t,e,a){var i=l(),s=t-i,o=20,c=0;e="undefined"===typeof e?500:e;var u=function t(){c+=o;var l=Math.easeInOutQuad(c,i,s,e);r(l),c<e?n(t):a&&"function"===typeof a&&a()};u()}},"1fa9":function(t,e,a){"use strict";var n=a("4ddc"),r=a.n(n);r.a},"4ddc":function(t,e,a){},"5f9b":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-card",{staticClass:"box-card filter-container"},[a("el-form",{ref:"listQuery",attrs:{model:t.listQuery}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"用户名"}},[a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"输入用户名",clearable:""},model:{value:t.listQuery.username,callback:function(e){t.$set(t.listQuery,"username",e)},expression:"listQuery.username"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"订单编号"}},[a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"输入订单编号",clearable:""},model:{value:t.listQuery.no,callback:function(e){t.$set(t.listQuery,"no",e)},expression:"listQuery.no"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"支付交易号"}},[a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"输入支付交易号",clearable:""},model:{value:t.listQuery.payment_no,callback:function(e){t.$set(t.listQuery,"payment_no",e)},expression:"listQuery.payment_no"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"收货人"}},[a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"输入收货人",clearable:""},model:{value:t.listQuery.contact_name,callback:function(e){t.$set(t.listQuery,"contact_name",e)},expression:"listQuery.contact_name"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"联系电话"}},[a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"输入收货人联系电话",clearable:""},model:{value:t.listQuery.contact_phone,callback:function(e){t.$set(t.listQuery,"contact_phone",e)},expression:"listQuery.contact_phone"}})],1)],1),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"订单创建时间"}},[a("el-date-picker",{attrs:{type:"datetimerange","picker-options":t.pickerOptions,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right"},model:{value:t.listQuery.created_at,callback:function(e){t.$set(t.listQuery,"created_at",e)},expression:"listQuery.created_at"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6,offset:20}},[a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",staticStyle:{"margin-left":"20px"},attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.handleFilter}},[t._v(" "+t._s(t.$t("table.search"))+" ")])],1)],1)],1)],1),a("el-card",{staticClass:"box-card box-cart-centent",staticStyle:{"margin-top":"20px"}},[a("el-row",[a("el-col",{attrs:{span:6,offset:20}},[a("el-button",{staticStyle:{margin:"0 0 20px 20px"},attrs:{loading:t.downloadLoading,type:"primary",icon:"el-icon-document"},on:{click:t.handleDownload}},[t._v(" 导出订单 ")])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],key:t.tableKey,staticStyle:{width:"100%"},attrs:{data:t.list,border:"",fit:"","highlight-current-row":"","header-cell-style":{background:"#ebeef5"}}},[a("el-table-column",{attrs:{"header-align":"center",type:"index",align:"center",label:"ID",width:"60"}}),a("el-table-column",{attrs:{"header-align":"center",align:"center",label:"订单号",width:"180px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("router-link",{attrs:{to:{name:"ViewOrUpdate",params:{no:e.row.no,username:e.row.user.username}}}},[a("el-tag",[t._v(t._s(e.row.no))])],1)]}}])}),a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"total_amount",label:"总金额"}}),a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"user.username",label:"用户",width:"100px"}}),a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"status",formatter:t.formatOrderStatus,label:"订单状态",width:"130px"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[n.editStatus?[a("el-select",{attrs:{placeholder:"请选择活动区域"},model:{value:n.status,callback:function(e){t.$set(n,"status",e)},expression:"row.status"}},t._l(t.orderStatusList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})})),1)]:a("span",[t._v(t._s(t._f("filterOrderStatus")(n.status)))])]}}])}),t._v("> "),a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"payment_no",label:"支付交易号"}}),a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"payment_method",formatter:t.formatPaymentMethod,label:"支付方式"}}),a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"refund_status",formatter:t.formatRefundStatus,label:"退款状态",width:"110px"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[n.editStatus?[a("el-select",{attrs:{placeholder:"请选择活动区域"},model:{value:n.refund_status,callback:function(e){t.$set(n,"refund_status",e)},expression:"row.refund_status"}},t._l(t.orderRefundStatus,(function(t){return a("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})})),1)]:a("span",[t._v(t._s(t._f("filterOrderStatus")(n.refund_status)))])]}}])}),a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"refund_no",label:"退款单号"}}),a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"reviewed",formatter:t.formatterReviewed,label:"是否评价"}}),a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"ship_status",formatter:t.formatShipStatus,label:"物流状态",width:"110px"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[n.editStatus?[a("el-select",{attrs:{placeholder:"请选择活动区域"},model:{value:n.ship_status,callback:function(e){t.$set(n,"ship_status",e)},expression:"row.ship_status"}},t._l(t.orderShipStatus,(function(t){return a("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})})),1)]:a("span",[t._v(t._s(t._f("filterShipStatus")(n.ship_status)))])]}}])}),t._v("> "),a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"address.contact_name",label:"收货人"}}),a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"address.contact_phone",label:"联系电话",width:"110px"}}),a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"address",label:"收货地址",width:"150px"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v(" "+t._s(t._f("filterAddress")(a.address))+" ")]}}])}),t._v("> "),a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"paid_at",label:"支付时间",width:"100px"}}),a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"created_at",label:"订单创建时间",width:"100px"}}),a("el-table-column",{attrs:{align:"center",fixed:"right",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[n.editStatus?a("el-button",{attrs:{type:"success",circle:"",icon:"el-icon-check"},on:{click:function(e){return t.confirmEdit(n)}}}):t._e(),n.editStatus?a("el-button",{staticClass:"cancel-btn",staticStyle:{margin:"5px 0 0 0"},attrs:{type:"info",circle:"",icon:"el-icon-circle-close"},on:{click:function(e){return t.cancelEdit(n)}}}):a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:""},on:{click:function(t){n.editStatus=!n.editStatus}}})]}}])})],1)],1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total>0"}],attrs:{total:t.total,page:t.listQuery.page,limit:t.listQuery.page_limit},on:{"update:page":function(e){return t.$set(t.listQuery,"page",e)},"update:limit":function(e){return t.$set(t.listQuery,"page_limit",e)},pagination:t.getList}})],1)},r=[],l=(a("d81d"),a("d3b7"),a("b0d9")),i=a("333d"),s=a("6724"),o={name:"PurchaseOrderList",components:{Pagination:i["a"]},directives:{waves:s["a"]},filters:{filterOrderStatus:function(t){switch(t){case 0:return"待付款";case 1:return"已付款";case-1:return"付款失败"}},filterShipStatus:function(t){switch(t){case 0:return"已签收";case 1:return"已发货";case-1:return"未发货"}},filterAddress:function(t){return t?t.province+t.city+t.district+t.address:""}},data:function(){return{list:[{status:"",ship_status:"",refund_status:"",created_at:"",user:{username:""},address:{province:""}}],total:0,tableKey:0,listQuery:{page:1,page_limit:10,no:"",payment_no:"",username:"",contact_name:"",contact_phone:"",created_at:""},pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-6048e5),t.$emit("pick",[a,e])}},{text:"最近一个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-2592e6),t.$emit("pick",[a,e])}},{text:"最近三个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-7776e6),t.$emit("pick",[a,e])}}]},listLoading:!0,orderStatusList:[{id:1,title:"已付款"},{id:0,title:"待付款"},{id:-1,title:"付款失败"},{id:-2,title:"取消订单"}],orderShipStatus:[{id:1,title:"已发货"},{id:-1,title:"未发货"},{id:0,title:"已签收"}],orderRefundStatus:[{id:1,title:"未退款"},{id:-1,title:"已退款"}],downloadLoading:!1}},created:function(){this.getList()},methods:{getList:function(){var t=this;this.listLoading=!0,Object(l["a"])(this.listQuery).then((function(e){t.list=e.data.data,t.total=e.data.total,t.listLoading=!1;var a=t.list;t.list=a.map((function(e){return t.$set(e,"editStatus",!1),e}))}))},formatPaymentMethod:function(t,e){return"null"===t.payment_method?"":t.payment_method},formatOrderStatus:function(t){switch(t.status){case 0:return"待付款";case 1:return"已付款";case-1:return"付款失败"}},formatShipStatus:function(t){switch(t.ship_status){case 0:return"已签收";case 1:return"已发货";case-1:return"未发货"}},formatRefundStatus:function(t){switch(t.refund_status){case 1:return"未退款";case-1:return"已退款"}},formatterReviewed:function(t){return t.reviewed?"已评价":"未评价"},handleFilter:function(){this.getList()},confirmEdit:function(t){var e=this;Object(l["c"])(t).then((function(t){20001===t.code?(e.$message({message:"更新成功",type:"success"}),e.getList()):e.$message({message:"更新失败",type:"fail"})})),t.editStatus=!1},cancelEdit:function(t){t.editStatus=!1,this.$message({message:"取消编辑",type:"warning"}),this.getList()},handleDownload:function(){var t=this;this.downloadLoading=!0,Promise.all([a.e("chunk-489b8c18"),a.e("chunk-2133cd4f")]).then(a.bind(null,"4bf8")).then((function(e){var a=["订单号","总金额","支付交易号","支付方式","退款单号","是否退款","订单创建时间"],n=["no","total_amount","payment_no","payment_method","refund_no","reviewed","created_at"],r=t.list,l=t.formatJson(n,r);e.export_json_to_excel({header:a,data:l,filename:t.filename,autoWidth:!0,bookType:"xlsx"}),t.downloadLoading=!1}))}}},c=o,u=(a("1fa9"),a("2877")),d=Object(u["a"])(c,n,r,!1,null,"47927ed1",null);e["default"]=d.exports},6724:function(t,e,a){"use strict";a("8d41");var n="@@wavesContext";function r(t,e){function a(a){var n=Object.assign({},e.value),r=Object.assign({ele:t,type:"hit",color:"rgba(0, 0, 0, 0.15)"},n),l=r.ele;if(l){l.style.position="relative",l.style.overflow="hidden";var i=l.getBoundingClientRect(),s=l.querySelector(".waves-ripple");switch(s?s.className="waves-ripple":(s=document.createElement("span"),s.className="waves-ripple",s.style.height=s.style.width=Math.max(i.width,i.height)+"px",l.appendChild(s)),r.type){case"center":s.style.top=i.height/2-s.offsetHeight/2+"px",s.style.left=i.width/2-s.offsetWidth/2+"px";break;default:s.style.top=(a.pageY-i.top-s.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",s.style.left=(a.pageX-i.left-s.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return s.style.backgroundColor=r.color,s.className="waves-ripple z-active",!1}}return t[n]?t[n].removeHandle=a:t[n]={removeHandle:a},a}var l={bind:function(t,e){t.addEventListener("click",r(t,e),!1)},update:function(t,e){t.removeEventListener("click",t[n].removeHandle,!1),t.addEventListener("click",r(t,e),!1)},unbind:function(t){t.removeEventListener("click",t[n].removeHandle,!1),t[n]=null,delete t[n]}},i=function(t){t.directive("waves",l)};window.Vue&&(window.waves=l,Vue.use(i)),l.install=i;e["a"]=l},"8d41":function(t,e,a){},b0d9:function(t,e,a){"use strict";a.d(e,"a",(function(){return r})),a.d(e,"c",(function(){return l})),a.d(e,"b",(function(){return i}));var n=a("b775");function r(t){return Object(n["a"])({url:"admin/order",method:"get",params:t})}function l(t){return Object(n["a"])({url:"admin/order/"+t.id,method:"post",data:t})}function i(t){return Object(n["a"])({url:"admin/order/"+t,method:"get"})}}}]);