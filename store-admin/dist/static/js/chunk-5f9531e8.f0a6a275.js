(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5f9531e8"],{1:function(t,e){},2:function(t,e){},3:function(t,e){},"4bf8":function(t,e,a){"use strict";a.r(e),a.d(e,"export_table_to_excel",(function(){return p})),a.d(e,"export_json_to_excel",(function(){return f}));a("99af"),a("4160"),a("d81d"),a("c19f"),a("ace4"),a("d3b7"),a("25f0"),a("5cc6"),a("9a8c"),a("a975"),a("735e"),a("c1ac"),a("d139"),a("3a7b"),a("d5d6"),a("82f8"),a("e91f"),a("60bd"),a("5f96"),a("3280"),a("3fcc"),a("ca91"),a("25a1"),a("cd26"),a("3c5d"),a("2954"),a("649e"),a("219c"),a("170b"),a("b39a"),a("72f7"),a("159b");var r=a("2909"),n=a("21a6"),l=a("1146"),i=a.n(l);function s(t){for(var e=[],a=t.querySelectorAll("tr"),r=[],n=0;n<a.length;++n){for(var l=[],i=a[n],s=i.querySelectorAll("td"),o=0;o<s.length;++o){var c=s[o],u=c.getAttribute("colspan"),d=c.getAttribute("rowspan"),p=c.innerText;if(""!==p&&p==+p&&(p=+p),r.forEach((function(t){if(n>=t.s.r&&n<=t.e.r&&l.length>=t.s.c&&l.length<=t.e.c)for(var e=0;e<=t.e.c-t.s.c;++e)l.push(null)})),(d||u)&&(d=d||1,u=u||1,r.push({s:{r:n,c:l.length},e:{r:n+d-1,c:l.length+u-1}})),l.push(""!==p?p:null),u)for(var f=0;f<u-1;++f)l.push(null)}e.push(l)}return[e,r]}function o(t,e){e&&(t+=1462);var a=Date.parse(t);return(a-new Date(Date.UTC(1899,11,30)))/864e5}function c(t,e){for(var a={},r={s:{c:1e7,r:1e7},e:{c:0,r:0}},n=0;n!=t.length;++n)for(var l=0;l!=t[n].length;++l){r.s.r>n&&(r.s.r=n),r.s.c>l&&(r.s.c=l),r.e.r<n&&(r.e.r=n),r.e.c<l&&(r.e.c=l);var s={v:t[n][l]};if(null!=s.v){var c=i.a.utils.encode_cell({c:l,r:n});"number"===typeof s.v?s.t="n":"boolean"===typeof s.v?s.t="b":s.v instanceof Date?(s.t="n",s.z=i.a.SSF._table[14],s.v=o(s.v)):s.t="s",a[c]=s}}return r.s.c<1e7&&(a["!ref"]=i.a.utils.encode_range(r)),a}function u(){if(!(this instanceof u))return new u;this.SheetNames=[],this.Sheets={}}function d(t){for(var e=new ArrayBuffer(t.length),a=new Uint8Array(e),r=0;r!=t.length;++r)a[r]=255&t.charCodeAt(r);return e}function p(t){var e=document.getElementById(t),a=s(e),r=a[1],l=a[0],o="SheetJS",p=new u,f=c(l);f["!merges"]=r,p.SheetNames.push(o),p.Sheets[o]=f;var m=i.a.write(p,{bookType:"xlsx",bookSST:!1,type:"binary"});Object(n["saveAs"])(new Blob([d(m)],{type:"application/octet-stream"}),"test.xlsx")}function f(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.multiHeader,a=void 0===e?[]:e,l=t.header,s=t.data,o=t.filename,p=t.merges,f=void 0===p?[]:p,m=t.autoWidth,h=void 0===m||m,g=t.bookType,b=void 0===g?"xlsx":g;o=o||"excel-list",s=Object(r["a"])(s),s.unshift(l);for(var v=a.length-1;v>-1;v--)s.unshift(a[v]);var _="SheetJS",y=new u,w=c(s);if(f.length>0&&(w["!merges"]||(w["!merges"]=[]),f.forEach((function(t){w["!merges"].push(i.a.utils.decode_range(t))}))),h){for(var S=s.map((function(t){return t.map((function(t){return null==t?{wch:10}:t.toString().charCodeAt(0)>255?{wch:2*t.toString().length}:{wch:t.toString().length}}))})),x=S[0],k=1;k<S.length;k++)for(var Q=0;Q<S[k].length;Q++)x[Q]["wch"]<S[k][Q]["wch"]&&(x[Q]["wch"]=S[k][Q]["wch"]);w["!cols"]=x}y.SheetNames.push(_),y.Sheets[_]=w;var O=i.a.write(y,{bookType:b,bookSST:!1,type:"binary"});Object(n["saveAs"])(new Blob([d(O)],{type:"application/octet-stream"}),"".concat(o,".").concat(b))}},"5f89":function(t,e,a){},"5f9b":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-card",{staticClass:"box-card filter-container"},[a("el-form",{ref:"listQuery",attrs:{model:t.listQuery}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"用户名"}},[a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"输入用户名",clearable:""},model:{value:t.listQuery.username,callback:function(e){t.$set(t.listQuery,"username",e)},expression:"listQuery.username"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"订单编号"}},[a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"输入订单编号",clearable:""},model:{value:t.listQuery.no,callback:function(e){t.$set(t.listQuery,"no",e)},expression:"listQuery.no"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"支付交易号"}},[a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"输入支付交易号",clearable:""},model:{value:t.listQuery.payment_no,callback:function(e){t.$set(t.listQuery,"payment_no",e)},expression:"listQuery.payment_no"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"收货人"}},[a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"输入收货人",clearable:""},model:{value:t.listQuery.contact_name,callback:function(e){t.$set(t.listQuery,"contact_name",e)},expression:"listQuery.contact_name"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"联系电话"}},[a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"输入收货人联系电话",clearable:""},model:{value:t.listQuery.contact_phone,callback:function(e){t.$set(t.listQuery,"contact_phone",e)},expression:"listQuery.contact_phone"}})],1)],1),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"订单创建时间"}},[a("el-date-picker",{attrs:{type:"datetimerange","picker-options":t.pickerOptions,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right"},model:{value:t.listQuery.created_at,callback:function(e){t.$set(t.listQuery,"created_at",e)},expression:"listQuery.created_at"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6,offset:20}},[a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",staticStyle:{"margin-left":"20px"},attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.handleFilter}},[t._v(" "+t._s(t.$t("table.search"))+" ")])],1)],1)],1)],1),a("el-card",{staticClass:"box-card box-cart-centent",staticStyle:{"margin-top":"20px"}},[a("el-row",[a("el-col",{attrs:{span:6,offset:20}},[a("el-button",{staticStyle:{margin:"0 0 20px 20px"},attrs:{loading:t.downloadLoading,type:"primary",icon:"el-icon-document"},on:{click:t.handleDownload}},[t._v(" 导出订单 ")])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],key:t.tableKey,staticStyle:{width:"100%"},attrs:{data:t.list,border:"",fit:"","highlight-current-row":"","header-cell-style":{background:"#ebeef5"}}},[a("el-table-column",{attrs:{"header-align":"center",type:"index",align:"center",label:"ID",width:"60"}}),a("el-table-column",{attrs:{"header-align":"center",align:"center",label:"订单号",width:"180px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("router-link",{attrs:{to:{name:"ViewOrUpdate",params:{no:e.row.no,username:e.row.user.username}}}},[a("el-tag",[t._v(t._s(e.row.no))])],1)]}}])}),a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"total_amount",label:"总金额"}}),a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"user.username",label:"用户",width:"100px"}}),a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"status",formatter:t.formatOrderStatus,label:"订单状态",width:"130px"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[r.editStatus?[a("el-select",{attrs:{placeholder:"请选择活动区域"},model:{value:r.status,callback:function(e){t.$set(r,"status",e)},expression:"row.status"}},t._l(t.orderStatusList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})})),1)]:a("span",[t._v(t._s(t._f("filterOrderStatus")(r.status)))])]}}])}),t._v("> "),a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"payment_no",label:"支付交易号"}}),a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"payment_method",formatter:t.formatPaymentMethod,label:"支付方式"}}),a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"refund_status",formatter:t.formatRefundStatus,label:"退款状态",width:"110px"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[r.editStatus?[a("el-select",{attrs:{placeholder:"请选择活动区域"},model:{value:r.refund_status,callback:function(e){t.$set(r,"refund_status",e)},expression:"row.refund_status"}},t._l(t.orderRefundStatus,(function(t){return a("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})})),1)]:a("span",[t._v(t._s(t._f("filterOrderRefundStatus")(r.refund_status)))])]}}])}),a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"refund_no",label:"退款单号"}}),a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"reviewed",formatter:t.formatterReviewed,label:"是否评价"}}),a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"ship_status",formatter:t.formatShipStatus,label:"物流状态",width:"110px"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[r.editStatus?[a("el-select",{attrs:{placeholder:"请选择活动区域"},model:{value:r.ship_status,callback:function(e){t.$set(r,"ship_status",e)},expression:"row.ship_status"}},t._l(t.orderShipStatus,(function(t){return a("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})})),1)]:a("span",[t._v(t._s(t._f("filterShipStatus")(r.ship_status)))])]}}])}),t._v("> "),a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"address.contact_name",label:"收货人"}}),a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"address.contact_phone",label:"联系电话",width:"110px"}}),a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"address",label:"收货地址",width:"150px"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v(" "+t._s(t._f("filterAddress")(a.address))+" ")]}}])}),t._v("> "),a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"paid_at",label:"支付时间",width:"100px"}}),a("el-table-column",{attrs:{"header-align":"center",align:"center",prop:"created_at",label:"订单创建时间",width:"100px"}}),a("el-table-column",{attrs:{align:"center",fixed:"right",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[r.editStatus?a("el-button",{attrs:{type:"success",circle:"",icon:"el-icon-check"},on:{click:function(e){return t.confirmEdit(r)}}}):t._e(),r.editStatus?a("el-button",{staticClass:"cancel-btn",staticStyle:{margin:"5px 0 0 0"},attrs:{type:"info",circle:"",icon:"el-icon-circle-close"},on:{click:function(e){return t.cancelEdit(r)}}}):a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:""},on:{click:function(t){r.editStatus=!r.editStatus}}})]}}])})],1)],1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total>0"}],attrs:{total:t.total,page:t.listQuery.page,limit:t.listQuery.page_limit},on:{"update:page":function(e){return t.$set(t.listQuery,"page",e)},"update:limit":function(e){return t.$set(t.listQuery,"page_limit",e)},pagination:t.getList}})],1)},n=[],l=(a("d81d"),a("d3b7"),a("36cd")),i=a("b0d9"),s=a("333d"),o=a("6724"),c={name:"PurchaseOrderList",components:{Pagination:s["a"]},directives:{waves:o["a"]},filters:{filterOrderStatus:function(t){switch(t){case 0:return"待付款";case 1:return"已付款";case-1:return"付款失败"}},filterShipStatus:function(t){switch(t){case 0:return"已签收";case 1:return"已发货";case-1:return"未发货"}},filterOrderRefundStatus:function(t){switch(t){case 1:return"未退款";case-1:return"已退款"}},filterAddress:function(t){return t?t.province+t.city+t.district+t.address:""}},data:function(){return{list:[{status:"",ship_status:"",refund_status:"",created_at:"",user:{username:""},address:{province:""}}],total:0,tableKey:0,listQuery:{page:1,page_limit:10,no:"",payment_no:"",username:"",contact_name:"",contact_phone:"",created_at:""},pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-6048e5),t.$emit("pick",[a,e])}},{text:"最近一个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-2592e6),t.$emit("pick",[a,e])}},{text:"最近三个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-7776e6),t.$emit("pick",[a,e])}}]},listLoading:!0,orderStatusList:[{id:1,title:"已付款"},{id:0,title:"待付款"},{id:-1,title:"付款失败"},{id:-2,title:"取消订单"}],orderShipStatus:[{id:1,title:"已发货"},{id:-1,title:"未发货"},{id:0,title:"已签收"}],orderRefundStatus:[{id:1,title:"未退款"},{id:-1,title:"已退款"}],downloadLoading:!1}},created:function(){this.getList()},methods:{getList:function(){var t=this;this.listLoading=!0,Object(i["a"])(this.listQuery).then((function(e){t.list=e.data.data,t.total=e.data.total,t.listLoading=!1;var a=t.list;t.list=a.map((function(e){return t.$set(e,"editStatus",!1),e}))}))},formatPaymentMethod:function(t,e){return"null"===t.payment_method?"":t.payment_method},formatOrderStatus:function(t){switch(t.status){case 0:return"待付款";case 1:return"已付款";case-1:return"付款失败"}},formatShipStatus:function(t){switch(t.ship_status){case 0:return"已签收";case 1:return"已发货";case-1:return"未发货"}},formatRefundStatus:function(t){switch(t.refund_status){case 1:return"未退款";case-1:return"已退款"}},formatterReviewed:function(t){return t.reviewed?"已评价":"未评价"},handleFilter:function(){this.getList()},confirmEdit:function(t){var e=this;Object(i["c"])(t).then((function(t){20001===t.code?(e.$message({message:"更新成功",type:"success"}),e.getList()):e.$message({message:"更新失败",type:"fail"})})),t.editStatus=!1},cancelEdit:function(t){t.editStatus=!1,this.$message({message:"取消编辑",type:"warning"}),this.getList()},handleDownload:function(){var t=this;this.downloadLoading=!0,Promise.resolve().then((function(){return Object(l["a"])(a("4bf8"))})).then((function(e){var a=["订单号","总金额","支付交易号","支付方式","退款单号","是否退款","订单创建时间"],r=["no","total_amount","payment_no","payment_method","refund_no","reviewed","created_at"],n=t.list,l=t.formatJson(r,n);e.export_json_to_excel({header:a,data:l,filename:t.filename,autoWidth:!0,bookType:"xlsx"}),t.downloadLoading=!1}))}}},u=c,d=(a("ad48"),a("2877")),p=Object(d["a"])(u,r,n,!1,null,"50d5cfec",null);e["default"]=p.exports},ad48:function(t,e,a){"use strict";var r=a("5f89"),n=a.n(r);n.a},b0d9:function(t,e,a){"use strict";a.d(e,"a",(function(){return n})),a.d(e,"c",(function(){return l})),a.d(e,"b",(function(){return i}));var r=a("b775");function n(t){return Object(r["a"])({url:"admin/order",method:"get",params:t})}function l(t){return Object(r["a"])({url:"admin/order/"+t.id,method:"post",data:t})}function i(t){return Object(r["a"])({url:"admin/order/"+t,method:"get"})}}}]);