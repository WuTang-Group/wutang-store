(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-65092844"],{1690:function(t,e,n){},"2f1b":function(t,e,n){"use strict";var i=n("1690"),a=n.n(i);a.a},"8f6b":function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return o})),n.d(e,"d",(function(){return r})),n.d(e,"e",(function(){return s})),n.d(e,"a",(function(){return l}));var i=n("b775");function a(t){return Object(i["a"])({url:"admin/category_stories",method:"get",params:t})}function o(t){return Object(i["a"])({url:"admin/category_stories",method:"post",data:t})}function r(t){return Object(i["a"])({url:"admin/category_stories/"+t,method:"get"})}function s(t,e){return Object(i["a"])({url:"admin/category_stories/"+e,method:"post",data:t})}function l(t){return Object(i["a"])({url:"/admin/category_stories/"+t,method:"delete"})}},c405:function(t,e,n){"use strict";n.d(e,"d",(function(){return a})),n.d(e,"e",(function(){return o})),n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return s})),n.d(e,"a",(function(){return l}));var i=n("b775");function a(t){return Object(i["a"])({url:"admin/product_categories",method:"get",params:t})}function o(t){return Object(i["a"])({url:"admin/product_categories",method:"post",data:t})}function r(t){return Object(i["a"])({url:"admin/product_categories/"+t,method:"get"})}function s(t,e){return Object(i["a"])({url:"admin/product_categories/"+e,method:"post",data:t})}function l(t){return Object(i["a"])({url:"admin/product_categories/"+t,method:"delete"})}},da89:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("el-card",{staticClass:"box-card",staticStyle:{padding:"0 30px"}},[n("el-form",{ref:"form",attrs:{model:t.form,"label-position":"left"}},[n("el-row",{attrs:{gutter:10}},[n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"故事名称",prop:"title"}},[n("el-input",{staticStyle:{width:"250px"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1)],1),n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"故事名称(英文)",prop:"title_en"}},[n("el-input",{staticStyle:{width:"250px"},model:{value:t.form.title_en,callback:function(e){t.$set(t.form,"title_en",e)},expression:"form.title_en"}})],1)],1),n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"所属类目",prop:"product_category_id"}},[n("el-select",{staticStyle:{width:"250px"},attrs:{placeholder:"请选择"},model:{value:t.form.product_category_id,callback:function(e){t.$set(t.form,"product_category_id",e)},expression:"form.product_category_id"}},t._l(t.CategoryList,(function(t){return n("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})})),1)],1)],1)],1),n("el-divider"),n("el-row",{attrs:{gutter:40}},[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{prop:"description"}},[n("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",plain:"",icon:"el-icon-edit-outline"},on:{click:function(e){return t.handleDescribes("description")}}}),n("el-collapse",{model:{value:t.activeNames,callback:function(e){t.activeNames=e},expression:"activeNames"}},[n("el-collapse-item",{attrs:{name:"description"}},[n("template",{slot:"title"},[n("span",{staticClass:"productDetailText"},[t._v("类目简介")])]),n("span",{domProps:{innerHTML:t._s(t.form.description)}})],2)],1)],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{prop:"description_en"}},[n("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",plain:"",icon:"el-icon-edit-outline"},on:{click:function(e){return t.handleDescribes("description_en")}}}),n("el-collapse",{model:{value:t.activeNames,callback:function(e){t.activeNames=e},expression:"activeNames"}},[n("el-collapse-item",{attrs:{name:"description_en"}},[n("template",{slot:"title"},[n("span",{staticClass:"productDetailText"},[t._v("类目简介(英文)")])]),n("span",{domProps:{innerHTML:t._s(t.form.description_en)}})],2)],1)],1)],1)],1),n("el-divider"),n("el-row",{attrs:{gutter:10}},[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"banner图"}},[n("el-upload",{ref:"uploadBanner",class:{hideBanner:t.hideUploadBanner},attrs:{name:"banner",action:"#","list-type":"picture-card","auto-upload":!1,limit:t.limitCount,"file-list":t.bannerList,"on-change":t.handleBannerChange,"on-remove":t.handleBannerRemove}},[n("el-button",{attrs:{size:"small",plain:"",type:"primary"}},[t._v("点击上传")]),n("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传一张jpg/png文件，且不超过500kb")])],1)],1)],1)],1),n("el-row",{staticStyle:{"margin-bottom":"50px"}},[n("el-col",{attrs:{span:2,offset:8}},[n("el-button",{attrs:{type:"success"},on:{click:function(e){return t.updateValue()}}},[t._v("提交")])],1),n("el-col",{attrs:{span:2}},[n("el-button",{attrs:{type:"info",plain:""},on:{click:t.closePageButton}},[t._v("返回")])],1)],1)],1)],1),n("el-dialog",{attrs:{title:"富文本编辑",visible:t.showDialog,width:"50%","before-close":t.handleClose},on:{"update:visible":function(e){t.showDialog=e}}},[n("tinymce",{attrs:{height:150},model:{value:t.tinyTxt,callback:function(e){t.tinyTxt=e},expression:"tinyTxt"}}),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.showDialog=!1}}},[t._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:t.comfirmSaveTiny}},[t._v("确 定")])],1)],1)],1)},a=[],o=(n("a4d3"),n("e01a"),n("8256")),r=n("c405"),s=n("8f6b"),l={name:"CreateCategory",components:{Tinymce:o["a"]},data:function(){return{showDialog:!1,tinyTxt:"",flag:"",form:{title:"",title_en:"",description:"",description_en:"",banner:"",product_category_id:""},CategoryList:null,hideUploadBanner:!1,limitCount:1,bannerList:[],activeNames:["describe","describe_en","description","description_en"]}},watch:{},created:function(){this.getCategoryList()},methods:{updateValue:function(){var t=this;console.log(this.form);var e=new FormData;e.append("description",this.form.description),e.append("description_en",this.form.description_en),e.append("banner",this.form.banner),e.append("title",this.form.title),e.append("title_en",this.form.title_en),e.append("product_category_id",this.form.product_category_id),Object(s["c"])(e).then((function(e){20001===e.code?(t.$message({message:"类目创建成功！",type:"success"}),t.initFormData()):t.$message({message:"类目创建失败，请检查输入参数！",type:"error"})}))},initFormData:function(){this.$refs["form"].resetFields(),this.bannerList=[],this.hideUploadBanner=!1},getCategoryList:function(){var t=this,e={page_limit:40};Object(r["d"])(e).then((function(e){t.CategoryList=e.data.data}))},handleBannerChange:function(t,e){this.hideUploadBanner=e.length>=this.limitCount,this.form.banner=t.raw},handleBannerRemove:function(t,e){this.hideUploadBanner=e.length>=this.limitCount,this.form.img=null},handleDescribes:function(t){this.flag=t,this.tinyTxt="",this.showDialog=!0},comfirmSaveTiny:function(){switch(this.flag){case"description":this.form.description=this.tinyTxt,this.showDialog=!1,this.tinyTxt="";break;case"description_en":this.form.description_en=this.tinyTxt,this.showDialog=!1,this.tinyTxt="";break;default:break}this.$message({message:"编辑完成",type:"success"})},handleClose:function(t){this.$confirm("确认关闭？").then((function(e){t()})).catch((function(t){}))},closePageButton:function(){this.$store.dispatch("tagsView/delView",this.$route),this.$router.go(-1)}}},c=l,d=(n("2f1b"),n("2877")),u=Object(d["a"])(c,i,a,!1,null,null,null);e["default"]=u.exports}}]);